<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>TU ASISTENTE Y TU MERJOR AMIGO</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      filter: grayscale(100%);
      background: #f5f5f5;
    }

    header {
      background: #444;
      color: white;
      padding: 15px;
      text-align: center;
    }

    .chat-box {
      max-width: 600px;
      margin: 20px auto;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    #messages {
      height: 250px;
      overflow-y: auto;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 10px;
      background: #f9f9f9;
    }

    .msg {
      margin: 5px 0;
    }

    .user {
      text-align: right;
      color: #555;
    }

    .bot {
      text-align: left;
      color: #333;
    }

    /* Fondo sección ejercicios */
    #ejercicios {
      background: url("https://images.unsplash.com/photo-1605296867304-46d5465a13f1?auto=format&fit=crop&w=1200&q=80") no-repeat center center;
      background-size: cover;
      min-height: 100vh;
      padding: 40px;
    }

    #ejercicios .overlay {
      background: rgba(255, 255, 255, 0.85);
      border-radius: 15px;
      padding: 30px;
      max-width: 600px;
      margin: auto;
    }

    /* Imagen modal */
    .modal-content {
      border-radius: 15px;
      overflow: hidden;
    }

    .modal-body {
      padding: 0;
    }

    .modal-body img {
      width: 100%;
      height: auto;
      /* Ajusta la altura automáticamente */
      max-height: 70vh;
      /* No excede 70% de la pantalla */
      object-fit: contain;
      /* Mantiene la proporción de la imagen */
    }

    .modal-footer {
      justify-content: center;
    }
  </style>
</head>

<body>
  <header>
    <h1>🤖 TU ASISTENTE Y TU MEJOR AMIGO</h1>
  </header>

  <!-- Navegación -->
  <nav class="nav nav-pills justify-content-center bg-dark">
    <a class="nav-link text-white" href="#chat" onclick="showSection('chat')">💬 Chat</a>
    <a class="nav-link text-white" href="#tips" onclick="showSection('tips')">🌿 Tips</a>
    <a class="nav-link text-white" href="#ejercicios" onclick="showSection('ejercicios')">🏃 Ejercicios</a>
    <a class="nav-link text-white" href="#medicamentos" onclick="showSection('medicamentos')">💊 Medicamentos</a>
    <a class="nav-link text-white" href="#alergias" onclick="showSection('alergias')">⚠️ Alergias</a>
    <a class="nav-link text-white" href="#contactos" onclick="showSection('contactos')">📞 Contactos</a>
  </nav>

  <!-- Chat -->
  <section id="chat" class="active">
    <div class="chat-box">
      <h3>Tu asistente</h3>
      <div id="messages"></div>
      <div class="input-group mt-3">
        <input type="text" id="userInput" class="form-control" placeholder="Escribe aquí...">
        <button class="btn btn-dark" onclick="sendMessage()">Enviar</button>
      </div>
    </div>
  </section>

  <!-- Tips -->
  <section id="tips" class="container py-4" style="display:none;">
    <div class="card shadow p-4">
      <h3>🌿 Tips para sentirte mejor</h3>
      <p>Haz clic en el botón para recibir un tip aleatorio con una imagen motivadora.</p>
      <button class="btn btn-dark mt-3" onclick="mostrarTip()">Bríndame un tip</button>
    </div>
  </section>

  <!-- Ejercicios -->
  <section id="ejercicios" style="display:none;">
    <div class="overlay shadow">
      <h3>🏃 Ejercicios básicos</h3>
      <p>Haz clic en el botón para recibir un ejercicio aleatorio con imagen.</p>
      <button class="btn btn-dark mt-3" onclick="mostrarEjercicio()">Bríndame un ejercicio</button>
    </div>
  </section>

  <!-- Contactos -->
  <section id="contactos" class="container py-4" style="display:none;">
    <div class="card shadow p-4">
      <h3>📞 Contactos de Emergencia</h3>
      <ul class="list-group mt-3">
        <li class="list-group-item d-flex justify-content-between"><strong>Hijo Juan</strong> <span>300 123 4567</span>
        </li>
        <li class="list-group-item d-flex justify-content-between"><strong>Doctora Pérez</strong> <span>310 987
            6543</span></li>
        <li class="list-group-item d-flex justify-content-between"><strong>Emergencias</strong> <span>123</span></li>
      </ul>
    </div>
  </section>
  <!-- Medicamentos -->
  <section id="medicamentos" class="container py-4" style="display:none;">
    <div class="card shadow p-4">
      <h3>💊 Medicamentos del Paciente</h3>
      <p>Lista de medicamentos actuales:</p>
      <ul class="list-group mt-3">
        <li class="list-group-item d-flex justify-content-between">
          <strong>Medicamento para el corazón</strong> <span>1 tableta diaria</span>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <strong>Medicamento para el colesterol</strong> <span>1 tableta en la noche</span>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <strong>Medicamento para el azúcar</strong> <span>Antes de las comidas</span>
        </li>
      </ul>
    </div>
  </section>

  <!-- Alergias -->
  <section id="alergias" class="container py-4" style="display:none;">
    <div class="row">
      <div class="col-md-6">
        <div class="card shadow p-4 mb-3">
          <h4>⚠️ Alergias a Medicamentos</h4>
          <ul class="list-group mt-3">
            <li class="list-group-item">Penicilina</li>
            <li class="list-group-item">Ibuprofeno</li>
            <li class="list-group-item">Aspirina</li>
          </ul>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card shadow p-4 mb-3">
          <h4>🌿 Otras Alergias</h4>
          <ul class="list-group mt-3">
            <li class="list-group-item">Picaduras de insectos</li>
            <li class="list-group-item">Ácaros del polvo</li>
            <li class="list-group-item">Ciertas telas (lana, poliéster)</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal genérico -->
  <div class="modal fade" id="modalInfo" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body">
          <img id="modalImg" src="" alt="Imagen">
          <div class="p-3">
            <h5 id="modalText"></h5>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-dark" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Navegación
    function showSection(id) {
      document.querySelectorAll("section").forEach(sec => sec.style.display = "none");
      document.getElementById(id).style.display = "block";
    }

    // Chat con Ollama
    async function sendMessage() {
      const input = document.getElementById("userInput");
      const msg = input.value.trim();
      if (!msg) return;

      addMessage(msg, "user");
      input.value = "";

      try {
        const response = await fetch("/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt: msg })
        });

        const data = await response.json();
        addMessage(data.reply || "⚠️ No hubo respuesta del modelo.", "bot");

      } catch (e) {
        addMessage("⚠️ No puedo conectarme con el servidor Ollama.", "bot");
      }
    }

    function addMessage(text, sender) {
      const msgDiv = document.createElement("div");
      msgDiv.className = "msg " + sender;
      msgDiv.textContent = text;
      document.getElementById("messages").appendChild(msgDiv);
      document.getElementById("messages").scrollTop = document.getElementById("messages").scrollHeight;
    }

    // Tips aleatorios con imágenes
    const tips = [
      { text: "🌞 Respira profundo 3 veces al despertar.", img: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1200&q=80" },
      { text: "💧 Bebe suficiente agua durante el día.", img: "https://images.unsplash.com/photo-1502741338009-cac2772e18bc?auto=format&fit=crop&w=1200&q=80" },
      { text: "📖 Lee unas páginas de un libro que disfrutes.", img: "https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&w=1200&q=80" },
      { text: "🎶 Escucha tu música favorita.", img: "https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?auto=format&fit=crop&w=1200&q=80" },
      { text: "😊 Llama a un ser querido.", img: "https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?auto=format&fit=crop&w=1200&q=80" },
      { text: "🌳 Da un paseo al aire libre si es posible.", img: "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1200&q=80" },
      { text: "📝 Escribe tres cosas por las que agradeces hoy.", img: "https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&w=1200&q=80" },
      { text: "☕ Disfruta una bebida caliente con calma.", img: "https://images.unsplash.com/photo-1509042239860-f550ce710b93?auto=format&fit=crop&w=1200&q=80" },
      { text: "🌺 Observa las plantas o flores a tu alrededor.", img: "https://images.unsplash.com/photo-1501004318641-b39e6451bec6?auto=format&fit=crop&w=1200&q=80" },
      { text: "🧩 Haz un rompecabezas o actividad mental ligera.", img: "https://images.unsplash.com/photo-1612438216332-6c95b09a3f38?auto=format&fit=crop&w=1200&q=80" },
      { text: "📺 Mira una película que te guste.", img: "https://images.unsplash.com/photo-1606813902987-4d06eae7e15b?auto=format&fit=crop&w=1200&q=80" },
      { text: "🍎 Come una fruta fresca.", img: "https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?auto=format&fit=crop&w=1200&q=80" },
      { text: "🧘 Dedica 5 minutos a meditar o relajarte.", img: "https://images.unsplash.com/photo-1552196563-55cd4e45efb3?auto=format&fit=crop&w=1200&q=80" },
      { text: "📷 Mira fotos de recuerdos felices.", img: "https://images.unsplash.com/photo-1504196606672-aef5c9cefc92?auto=format&fit=crop&w=1200&q=80" },
      { text: "💤 Toma una siesta corta si lo necesitas.", img: "https://images.unsplash.com/photo-1505691938895-1758d7feb511?auto=format&fit=crop&w=1200&q=80" }
    ];
    function mostrarTip() {
      const random = tips[Math.floor(Math.random() * tips.length)];
      document.getElementById("modalText").textContent = random.text;
      document.getElementById("modalImg").src = random.img;
      new bootstrap.Modal(document.getElementById("modalInfo")).show();
    }

    // Ejercicios aleatorios con imágenes
    const ejercicios = [
      { text: "🚶 Caminar 10 minutos por la casa.", img: "https://images.pexels.com/photos/3763871/pexels-photo-3763871.jpeg" },
      { text: "🪑 Sentarse y levantarse de una silla 5 veces.", img: "https://images.pexels.com/photos/843658/pexels-photo-843658.jpeg" },
      { text: "🙆 Estiramiento suave de brazos por 30 segundos.", img: "https://images.pexels.com/photos/4056723/pexels-photo-4056723.jpeg" },
      { text: "🦵 Levantar una pierna sentado, 5 veces cada una.", img: "https://images.pexels.com/photos/3757376/pexels-photo-3757376.jpeg" },
      { text: "👐 Abrir y cerrar las manos 10 veces.", img: "https://images.pexels.com/photos/3820328/pexels-photo-3820328.jpeg" },
      { text: "🤸 Girar suavemente el torso a derecha e izquierda.", img: "https://images.pexels.com/photos/4664523/pexels-photo-4664523.jpeg" },
      { text: "🧍 Elevar los talones y bajar, 10 repeticiones.", img: "https://images.pexels.com/photos/4498295/pexels-photo-4498295.jpeg" },
      { text: "🙌 Estirar los brazos hacia arriba por 20 segundos.", img: "https://images.pexels.com/photos/843671/pexels-photo-843671.jpeg" },
      { text: "🧎 Flexionar y estirar suavemente las rodillas.", img: "https://images.pexels.com/photos/4498227/pexels-photo-4498227.jpeg" },
      { text: "👣 Caminar de puntillas por 1 minuto.", img: "https://images.pexels.com/photos/1864525/pexels-photo-1864525.jpeg" },
      { text: "✋ Hacer círculos con los hombros hacia atrás.", img: "https://images.pexels.com/photos/4664524/pexels-photo-4664524.jpeg" },
      { text: "🪞 Practicar equilibrio apoyándose en una pared.", img: "https://images.pexels.com/photos/3820308/pexels-photo-3820308.jpeg" },
      { text: "👂 Inclinar suavemente la cabeza hacia cada lado.", img: "https://images.pexels.com/photos/4498602/pexels-photo-4498602.jpeg" },
      { text: "🖐 Masajear suavemente las manos y dedos.", img: "https://images.pexels.com/photos/4506101/pexels-photo-4506101.jpeg" },
      { text: "🪑 Elevar una pierna recta mientras estás sentado.", img: "https://images.pexels.com/photos/4498606/pexels-photo-4498606.jpeg" }
    ];
    function mostrarEjercicio() {
      const random = ejercicios[Math.floor(Math.random() * ejercicios.length)];
      document.getElementById("modalText").textContent = random.text;
      document.getElementById("modalImg").src = random.img;
      new bootstrap.Modal(document.getElementById("modalInfo")).show();
    }
  </script>
</body>

</html>